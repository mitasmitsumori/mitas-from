<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MiTAS 内訳書</title>
</head>
<body>
  <h1>見積内訳書</h1>
  <table border="1">
    <tbody id="estimateTable"></tbody>
  </table>

  <script>
    const params = new URLSearchParams(window.location.search);
    const structure = params.get("structure") || "木造";
    const area = parseFloat(params.get("area") || 0);
    const scaffold = parseFloat(params.get("scaffold") || 0);
    const wood = parseFloat(params.get("woodWaste") || 0);
    const board = parseFloat(params.get("boardWaste") || 0);
    const plastic = parseFloat(params.get("plasticWaste") || 0);
    const rubble = parseFloat(params.get("rubbleWaste") || 0);
    const glass = parseFloat(params.get("glassWaste") || 0);
    const ceramic = parseFloat(params.get("ceramicWaste") || 0);

    const unitPrices = {
      "木造": 33000 / 3.3,
      "RC造": 50000 / 3.3,
      "S造": 33000 / 3.3,
      "軽量鉄骨造": 33000 / 3.3
    };

    const demolitionCost = Math.round(area * unitPrices[structure]);
    const scaffoldCost = Math.round(scaffold * 600);
    const asbestosCost = 90000;
    const machineCost = 14000; // 仮で10km圏内の固定
    const wasteCost = {
      wood: wood * 16,
      board: board * 35,
      plastic: plastic * 50,
      rubble: rubble * 2,
      glass: glass * 10,
      ceramic: ceramic * 20
    };
    const resale = {
      iron: 0,
      aluminum: 0
    };

    const totalWaste = Object.values(wasteCost).reduce((sum, val) => sum + val, 0);
    const total = demolitionCost + scaffoldCost + asbestosCost + machineCost + totalWaste;

    const table = document.getElementById("estimateTable");

    function addRow(name, value) {
      const row = document.createElement("tr");
      row.innerHTML = `<td>${name}</td><td>${value.toLocaleString()} 円</td>`;
      table.appendChild(row);
    }

    addRow("解体工事費", demolitionCost);
    addRow("足場費", scaffoldCost);
    addRow("重機回送費", machineCost);
    addRow("アスベスト調査費", asbestosCost);
    addRow("木くず処分費", wasteCost.wood);
    addRow("ボード類処分費", wasteCost.board);
    addRow("廃プラ処分費", wasteCost.plastic);
    addRow("ガラ処分費", wasteCost.rubble);
    addRow("ガラス処分費", wasteCost.glass);
    addRow("陶器処分費", wasteCost.ceramic);
    addRow("合計金額", total);
  </script>
</body>
</html>
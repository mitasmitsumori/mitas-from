<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>見積内訳 - MiTAS</title>
  <style>
    body { font-family: 'Arial', sans-serif; padding: 20px; }
    h1 { text-align: center; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #333; padding: 8px; text-align: left; }
  </style>
</head>
<body>
  <h1>見積内訳書</h1>
  <table id="estimateTable">
    <tr><th>項目</th><th>内容</th><th>金額（円）</th></tr>
    <tr><td>建物構造</td><td id="structure"></td><td id="structureCost"></td></tr>
    <tr><td>延床面積</td><td id="area"></td><td></td></tr>
    <tr><td>現場住所</td><td id="address" colspan="2"></td></tr>
    <tr><td>足場面積</td><td id="scaffoldArea"></td><td id="scaffoldCost"></td></tr>
    <tr><td>残置物</td><td id="leftovers"></td><td></td></tr>
    <tr><td>付帯工事</td><td id="additional"></td><td></td></tr>
    <tr><td>アスベスト調査費</td><td>固定</td><td id="asbestosCost"></td></tr>
    <tr><td>重機回送費</td><td>10km以内</td><td id="machineCost"></td></tr>
    <tr><td>産廃費用</td><td>木・ボード等</td><td id="wasteCost"></td></tr>
    <tr><th colspan="2">合計</th><th id="total"></th></tr>
  </table>

  <script>
    const params = new URLSearchParams(window.location.search);

    const structure = params.get("structure");
    const area = Number(params.get("area"));
    const address = params.get("address");
    const scaffold = Number(params.get("scaffold"));
    const leftovers = params.get("leftovers");
    const additional = params.get("additional");

    const woodWaste = Number(params.get("woodWaste") || 0);
    const boardWaste = Number(params.get("boardWaste") || 0);
    const plasticWaste = Number(params.get("plasticWaste") || 0);
    const rubbleWaste = Number(params.get("rubbleWaste") || 0);
    const glassWaste = Number(params.get("glassWaste") || 0);
    const ceramicWaste = Number(params.get("ceramicWaste") || 0);

    const unitPrices = {
      木造: 33000, RC造: 50000, S造: 33000, 軽量鉄骨造: 33000,
      足場: 600,
      アスベスト: 90000,
      重機回送: 14000,
      産廃: {
        木くず: 16,
        ボード類: 35,
        廃プラ類: 50,
        ガラ: 2,
        ガラス: 10,
        陶器: 20
      }
    };

    const structureCost = area * (unitPrices[structure] || 0);
    const scaffoldCost = scaffold * unitPrices.足場;
    const asbestosCost = unitPrices.アスベスト;
    const machineCost = unitPrices.重機回送;
    const wasteCost =
      woodWaste * unitPrices.産廃["木くず"] +
      boardWaste * unitPrices.産廃["ボード類"] +
      plasticWaste * unitPrices.産廃["廃プラ類"] +
      rubbleWaste * unitPrices.産廃["ガラ"] +
      glassWaste * unitPrices.産廃["ガラス"] +
      ceramicWaste * unitPrices.産廃["陶器"];

    const total = structureCost + scaffoldCost + asbestosCost + machineCost + wasteCost;

    document.getElementById("structure").textContent = structure;
    document.getElementById("area").textContent = `${area} ㎡`;
    document.getElementById("address").textContent = address;
    document.getElementById("scaffoldArea").textContent = `${scaffold} ㎡`;
    document.getElementById("leftovers").textContent = leftovers;
    document.getElementById("additional").textContent = additional;
    document.getElementById("structureCost").textContent = structureCost.toLocaleString();
    document.getElementById("scaffoldCost").textContent = scaffoldCost.toLocaleString();
    document.getElementById("asbestosCost").textContent = asbestosCost.toLocaleString();
    document.getElementById("machineCost").textContent = machineCost.toLocaleString();
    document.getElementById("wasteCost").textContent = wasteCost.toLocaleString();
    document.getElementById("total").textContent = total.toLocaleString();
  </script>
</body>
</html>